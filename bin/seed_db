#!/usr/bin/perl -w

use strict;
use warnings;

use FindBin;
use lib "$FindBin::Bin/../lib";

use File::Copy;
use BPM::Engine;

my $db_file = './t/var/bpmengine.db';
my $dsn = 'dbi:SQLite:dbname=t/var/bpmengine.db';

File::Copy::copy(
    File::Spec->catfile('./t/lib/BPM/Engine', 'bpmengine.test.db'),
    $db_file
    );

my $engine = BPM::Engine->new( connect_info => $dsn );

map { $engine->create_package('./t/var/' . $_) } qw/
    01-basic.xpdl 02-branching.xpdl 06-iteration.xpdl
    07-termination.xpdl samples.xpdl
    /;

print "Packages seeded into $db_file";

1;
__END__

=pod

=head1 NAME

seed_db - Seed a database with processes from XPDL files

=head1 SYNOPSIS

seed_db

Example:

  perl bin/seed_db

=head1 DESCRIPTION

Seed a new or existing database (./t/var/bpmengine.db) with workflow processes from XPDL files

=head1 AUTHOR

Peter de Vos, C<< <sitetech at cpan.org> >>

=head1 COPYRIGHT AND LICENSE

Copyright 2010 Peter de Vos, all rights reserved.

This program is free software; you can redistribute it and/or modify it
under the same terms as Perl itself.

=cut
